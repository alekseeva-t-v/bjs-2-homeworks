# Декораторы
Домашнее задание к лекции 8 «Декораторы» курса [«JavaScript-программирование для начинающих»](https://cat.2035.university/rall/course/18787/?project_id=48).

### Задача 1. Усовершенствовать кеширующий декоратор

Напишите усовершенствованный кеширующий декоратор `cachingDecoratorNew`, так, чтобы он кешировал только **последние пять различных** вызовов функции, то есть чтобы кеш мог хранить только пять значений.

Чтобы тесты выполнялись, функция должна возвращать следующие строки(!) «Вычисляем: 10» для первого вызова (10 для примера) и «Из кеша: 10» — для повторного.

Для вычисления хеша нужно использовать алгоритм хеширования [MD5](https://ru.wikipedia.org/wiki/MD5). Для его применения в файл с тестами была подключена библиотека [js-md5](https://github.com/emn178/js-md5). То есть алгоритм MD5 применим в любой области видимости файлов скриптов, подлюченных к странице с тестми.

```js
const hasingText = "какой-нибудь текст";
console.log(md5(hasingText)); // 8d1d3ecc455a4220590e6d27e6c1a267
console.log(md5([10, 20, 30])); // 7f49b84d0bbc38e96493718013baace6
```

Рекомендуется параллельно выводить результаты в консоль, чтобы было удобнее отлаживать.

```js
console.log("Вычисляем: " + result);
return "Вычисляем: " + result;
```

#### Результат, который необходимо получить

```javascript
const addAndMultiply = (a, b, c) => (a + b) * c;
const upgraded = cachingDecoratorNew(addAndMultiply);
upgraded(1, 2, 3); // вычисляем: 9
upgraded(1, 2, 3); // из кэша: 9
upgraded(2, 2, 3); // вычисляем: 12
upgraded(3, 2, 3); // вычисляем: 15
upgraded(4, 2, 3); // вычисляем: 18
upgraded(5, 2, 3); // вычисляем: 21
upgraded(6, 2, 3); // вычисляем: 18 (при этом кеш для 1, 2, 3 уничтожается)
upgraded(1, 2, 3); // вычисляем: 9  (снова вычисляем, кеша нет)
```

### Задача 2. Декоратор debounce с моментальным вызовом и подсчётом количества вызовов

Усовершенствуйте  debounce декоратор, добавив три дополнительные фичи:

1. Первый вызов происходил моментально, а следующий не раньше, чем через интервал времени, причём интервал должен задаваться в момент применения декоратора к функции.
2. Усовершенствуйте декоратор так, чтобы в свойстве `count` декорированной функции хранилось количество её вызовов.
3. Усовершенствуйте декоратор так, чтобы в свойстве `allCount` декорированной функции хранилось количество вызовов декоратора.

![графическое представление](../assets/img/9zZGdlJbxM.png)


```javascript
const sendSignal = (signalOrder, delay) => console.log("Сигнал отправлен", signalOrder, delay);
const upgradedSendSignal = debounceDecoratorNew(sendSignal, 2000);
setTimeout(() => upgradedSendSignal(1, 0)); // Сигнал отправлен + будет запланирован асинхронный запуск, который будет проигнорирован, так как следующий сигнал отменит предыдущий (300 - 0 < 2000)
setTimeout(() => upgradedSendSignal(2, 300), 300); // проигнорировано, так как следующий сигнал отменит предыдущий (900 - 300 < 2000)
setTimeout(() => upgradedSendSignal(3, 900), 900); // проигнорировано, так как следующий сигнал отменит предыдущий (1200 - 900 < 2000)
setTimeout(() => upgradedSendSignal(4, 1200), 1200); // проигнорировано, так как следующий сигнал отменит предыдущий (2300 - 1200 < 2000)
setTimeout(() => upgradedSendSignal(5, 2300), 2300); // Сигнал отправлен, так как следующий вызов не успеет отменить текущий: 4400-2300=2100 (2100 > 2000)
setTimeout(() => upgradedSendSignal(6, 4400), 4400); // проигнорировано, так как следующий сигнал отменит предыдущий (4500 - 4400 < 2000)
setTimeout(() => upgradedSendSignal(7, 4500), 4500); // Сигнал будет отправлен, так как последний вызов debounce декоратора (спустя 4500 + 2000 = 6500) 6,5с
setTimeout(() => {
  console.log(upgradedSendSignal.count); // было выполнено 3 отправки сигнала
  console.log(upgradedSendSignal.allCount); // было выполнено 6 вызовов декорированной функции
}, 7000)
```
![](https://sun9-east.userapi.com/sun9-44/s/v1/ig2/7KfGj0KiLx3jzhc0fWqseaw_wYXKVbX_9Ym7tkwkkFX5IKdpLzHIgNw4r-0tPrBWxqF3jz8p5QnvGaoycOCYbZRM.jpg?size=383x228&quality=96&type=album)

## Результат при правильном решении задания
![графическое представление](../Jasmine/results/sucessed_tasks_8.png)

## **Стек технологий**
![JS](./js.svg)
![GIT](./git.svg)

## **[Демо](https://alekseeva-t-v.github.io/bjs-2-homeworks/8.decorators/)**